<html>
  <head>
    <title>Mix2D</title>
    <script src="mix2d.js" type="text/javascript"></script>
  </head>
  <body>
    <form>
      <input type="text" id="funfunfun" value="x + y" onkeyup="tryupdate()" />
      <input type="text" id="scale" value="10" onkeyup="tryupdate()" />
      <input type="button" onclick="update()" value="Update" />
    </form>
    <canvas id="yeswecanvas" height=512 width=512 />
    <script type="text/javascript">

      var sources = [ fromColor("indigo")
                    , fromColor("blue")
                    , fromColor("darkblue")
                    ];
      update();

      /* ex with pics */
      /*
      var sources = [];
      fromImage( "img1.jpg" , function (d) {
        sources.push(d);
        fromImage( "img2.jpg" , function (d) {
          sources.push(d);
          fromImage( "img3.jpg" , function (d) {
            sources.push(d);
            fromImage( "img4.jpg" , function (d) {
              sources.push(d);
              update();
              })
            })
          })
        });
        */

      function update(){
        var v = document.getElementById("funfunfun").value;
        var text = "var x=this.x;var y=this.y;return (" + v + ")";
        var f = new Function(text);
        var scale = document.getElementById("scale").value;
        scale = ~~scale;
        mix2d_draw("yeswecanvas", sources, function(x, y) {
            var t = {"x": x/scale, "y": y/scale};
            return f.apply(t);
            });
        lastupdate = new Date();
      };
      function tryupdate(){
        try {
          window.setTimeout(update, 50);
        } catch (e) {
          if (!(e instanceof SyntaxError)) {
            throw (e);
          }
        }
      }
    </script>
  </body>
</html>
